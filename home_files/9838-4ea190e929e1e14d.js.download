(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9838],{75944:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(17187);function o(){return new r.EventEmitter}},63431:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(34051),o=t.n(r),a=t(54098),c=t.n(a),u=t(31917);function i(e,n,t,r,o,a,c){try{var u=e[a](c),i=u.value}catch(s){return void t(s)}u.done?n(i):Promise.resolve(i).then(r,o)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function c(e){i(a,r,o,c,u,"next",e)}function u(e){i(a,r,o,c,u,"throw",e)}c(void 0)}))}}function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){l(e,n,t[n])}))}return e}function p(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var d=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;function v(e){return h.apply(this,arguments)}function h(){return(h=s(o().mark((function e(n){var t,r,a,i,s,l,v,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.url,r=p(n,["url"]),e.prev=2,e.next=5,c()(t,{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},method:"post",body:JSON.stringify(f({},r,{format:"pbuf"}))});case 5:a=e.sent,e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),e.t0.statusCode=504,e.t0;case 12:if(a.ok){e.next=28;break}if(!(s=a.headers.get("content-type"))||!s.includes("application/json")){e.next=22;break}return e.next=18,a.json();case 18:l=e.sent,i=l.message,e.next=25;break;case 22:return e.next=24,a.text();case 24:i=e.sent;case 25:throw(v=new Error(i||a.statusText)).statusCode=a.status,v;case 28:return e.next=30,a.json();case 30:if((h=e.sent).token.startsWith("v2.public.")||d.test(h.token)){e.next=33;break}throw new u.Z("Expected token to be PASETO- or base64-encoded").setExtras(f({connectionMetadata:h,url:t},r));case 33:return e.abrupt("return",h);case 34:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}},53572:function(e,n,t){"use strict";t.d(n,{u:function(){return u}});var r=t(34051),o=t.n(r);function a(e,n,t,r,o,a,c){try{var u=e[a](c),i=u.value}catch(s){return void t(s)}u.done?n(i):Promise.resolve(i).then(r,o)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var c=e.apply(n,t);function u(e){a(c,r,o,u,i,"next",e)}function i(e){a(c,r,o,u,i,"throw",e)}u(void 0)}))}}function u(){return i.apply(this,arguments)}function i(){return(i=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}return e.abrupt("return");case 2:if(document.hidden){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",new Promise((function(e){var n=function(){document.hidden||(document.removeEventListener("visibilitychange",n),e())};document.addEventListener("visibilitychange",n)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},27754:function(e,n,t){"use strict";t.d(n,{e:function(){return N.e},Z:function(){return B}});var r=t(34051),o=t.n(r),a=t(68944);function c(e,n,t,r,o,a,c){try{var u=e[a](c),i=u.value}catch(s){return void t(s)}u.done?n(i):Promise.resolve(i).then(r,o)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function u(e){c(a,r,o,u,i,"next",e)}function i(e){c(a,r,o,u,i,"throw",e)}u(void 0)}))}}function i(e){return s.apply(this,arguments)}function s(){return(s=u(o().mark((function e(n){var t,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.client,r=n.args,a=n.env,e.abrupt("return",new Promise((function(e){var n=t.openChannel({service:"exec"},(function(t){var o=t.error,c=t.channel;if(o)e({error:o.message,output:null});else{if(!c)throw new Error("Expected channel");var u="";c.onCommand((function(e){e.output&&(u+=e.output)})),c.request({exec:{args:r,env:a}}).then((function(t){t.channelClosed?e({error:"Channel closed",output:u||null}):("open"===c.status&&n(),t.error?e({error:t.error,output:u||null}):e({output:u,error:null}))}))}}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=t(87152),f=t(21),p=t(63431),d=t(88768),v=t(11163),h=t.n(v),w=t(44215),g=t(34155);function b(e,n,t,r,o,a,c){try{var u=e[a](c),i=u.value}catch(s){return void t(s)}u.done?n(i):Promise.resolve(i).then(r,o)}function m(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function c(e){b(a,r,o,c,u,"next",e)}function u(e){b(a,r,o,c,u,"throw",e)}c(void 0)}))}}function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){y(e,n,t[n])}))}return e}var C=Boolean(g.env.CAPTCHA_EMBEDS);function O(e){return x.apply(this,arguments)}function x(){return(x=m(o().mark((function e(n){var t,r,a,c,u,i,s,v,g,b,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.replId,r=n.isLoggedIn,a=n.overrideClusterMetadata,c=n.retry,u=n.asViewer,l.l){e.next=3;break}throw new Error("Expected apollo client");case 3:return i=function(e){w.kg.error("Goval connection failure",{errorMessage:e&&e.message||"unidentified failure",replId:t,reason:"captcha",context:"services"})},s=Boolean(h().query.lite||h().query.embed),v={url:"/data/repls/".concat(t,"/get_connection_metadata"),overrideClusterMetadata:a,clientVersion:"5e3fdec",hCaptchaSiteKey:f.w,isEmbed:s,flags:{},retry:c||0,asViewer:u},e.next=8,l.l.query({query:d.Nfd});case 8:if(g=e.sent.data,b=Boolean(g.shouldBypassCaptcha),!(r||s&&!C||b)){e.next=12;break}return e.abrupt("return",(0,p.Z)(v));case 12:return e.prev=12,e.next=15,(0,f.Z)();case 15:return m=e.sent,e.abrupt("return",(0,p.Z)(E({},v,{captcha:m})));case 19:return e.prev=19,e.t0=e.catch(12),i(e.t0),e.abrupt("return",O({replId:t,overrideClusterMetadata:a,retry:(c||0)+1,isLoggedIn:r}));case 23:case"end":return e.stop()}}),e,null,[[12,19]])})))).apply(this,arguments)}var N=t(56700),k=t(75944),P=t(1311),S=t(53572),T=t(31917),I=t(76569),_=t(25108);function M(e,n,t,r,o,a,c){try{var u=e[a](c),i=u.value}catch(s){return void t(s)}u.done?n(i):Promise.resolve(i).then(r,o)}function j(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function c(e){M(a,r,o,c,u,"next",e)}function u(e){M(a,r,o,c,u,"throw",e)}c(void 0)}))}}function A(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){A(e,n,t[n])}))}return e}function L(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var Z;function R(e,n,t){return G.apply(this,arguments)}function G(){return(G=j(o().mark((function e(n,t,r){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("open"===n.status){e.next=2;break}return e.abrupt("return",!1);case 2:return a=w.kg.timeStart({type:r,gurl:t}),e.next=5,n.request({ping:{}});case 5:if(!e.sent.channelClosed){e.next=8;break}return e.abrupt("return",!1);case 8:return a("latency to pid1"),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var n=e.onUnrecoverableError,t=(0,k.Z)();t.setMaxListeners(1e3);var r=null,c=N.e.DISCONNECTED,u=function(e){c!==e&&(c=e,t.emit(Z.CONNECTION_STATE_CHANGE,c))},s=new a.KU,l=function(e,n){R(e,n,"periodic")&&"closed"!==e.status&&setTimeout((function(){return l(e,n)}),1e3)};s.setUnrecoverableErrorHandler(n);var f=window.location.search.includes("debug=1");return f&&s.addDebugFunc((function(e){"log"===e.type&&_.log("in"===e.log.direction?"--\x3e":"<--",e.log.cmd)})),{onPortOpened:function(e){return t.on(Z.PORT_OPEN,e),function(){t.removeListener(Z.PORT_OPEN,e)}},onConnectionStateChanged:function(e){return t.on(Z.CONNECTION_STATE_CHANGE,e),function(){t.removeListener(Z.CONNECTION_STATE_CHANGE,e)}},connect:function(e){var i=e.context,p=e.customConnectionMetadata,d=e.fetchConnectionMetadataExtras,v=L(e,["context","customConnectionMetadata","fetchConnectionMetadataExtras"]);r=i,c!==N.e.DISCONNECTED&&s.close();var h=null,g={context:i,reuseConnectionMetadata:!0,fetchConnectionMetadata:function(){var e=j(o().mark((function e(n){var t,r,c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.performance.clearMarks(w.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(w.Iy.fetchConnectionMetadataPageInvisibleEnd),t=w.kg.timeStart(),window.performance.mark(w.Iy.fetchConnectionMetadataPageInvisibleStart),e.next=7,(0,S.u)();case 7:window.performance.mark(w.Iy.fetchConnectionMetadataPageInvisibleEnd),t("page visible fetch connection metadata");case 9:return e.next=11,(0,I.Z)();case 11:if(r=e.sent,!n.aborted){e.next=14;break}return e.abrupt("return",{error:a.gS.Aborted});case 14:if(r||!p||h===p.token){e.next=17;break}return h=p.token,e.abrupt("return",D({},p,{error:null}));case 17:if(c=w.kg.timeStart({hasCustomFetch:Boolean(v.fetchConnectionMetadata)}),e.prev=19,!v.fetchConnectionMetadata){e.next=26;break}return e.next=23,v.fetchConnectionMetadata();case 23:u=e.sent,e.next=29;break;case 26:return e.next=28,O(D({asViewer:i.asViewer,replId:i.repl.id,isLoggedIn:Boolean(i.currentUser),overrideClusterMetadata:r},d));case 28:u=e.sent;case 29:e.next=40;break;case 31:if(e.prev=31,e.t0=e.catch(19),!n.aborted){e.next=35;break}return e.abrupt("return",{error:a.gS.Aborted});case 35:e.t1=e.t0&&e.t0.statusCode,e.next=400===e.t1||408===e.t1||409===e.t1||429===e.t1||500===e.t1||502===e.t1||503===e.t1||504===e.t1?38:39;break;case 38:return e.abrupt("return",{error:a.gS.Retriable});case 39:throw e.t0;case 40:if(!n.aborted){e.next=42;break}return e.abrupt("return",{error:a.gS.Aborted});case 42:return f&&_.log("connecting",u),c("fetched connection metadata"),e.abrupt("return",D({},u,{error:null}));case 45:case"end":return e.stop()}}),e,null,[[19,31]])})));return function(n){return e.apply(this,arguments)}}(),pollingHost:"gp-v2.replit.com"},b=window.performance.now(),m=0;s.open(g,(function(e){var o,a=e.channel;if(e.error)return u(N.e.DISCONNECTED),function(){};if(!a)throw new Error("Expected channel");f&&_.log("connected",{replId:i.repl.id});var c,p,d=a.onCommand((function(e){switch(e.body){case"portOpen":if(!e.portOpen)throw new Error("portOpen only handles portOpen commands");if(!e.portOpen.forwarded)return;var r=e.portOpen.port||0;if(5901===r)return;t.emit(Z.PORT_OPEN,{port:r,isVnc:5900===r});break;case"protocolError":var o,a;n(new T.Z("goval panic").setExtra("message",null!==(a=null===(o=e.protocolError)||void 0===o?void 0:o.text)&&void 0!==a?a:"protocol error"))}}));(null===(o=i.currentUser)||void 0===o?void 0:o.flagPid1Ping)?l(a,null===(c=s.getConnectionMetadata())||void 0===c?void 0:c.gurl):R(a,null===(p=s.getConnectionMetadata())||void 0===p?void 0:p.gurl,"startup");window.v6ws=s.ws;var v=i.repl,h=v.id,g=v.language,y=window.performance.now()-b;return w.kg.info("connected to pid1",{time:y,reconnectCount:m,replId:h,language:g}),u(N.e.CONNECTED),function(e){var n=e.willReconnect;if(d(),!n)return r=null,void u(N.e.DISCONNECTED);b=window.performance.now(),m++,u(N.e.CONNECTING)}})),u(N.e.CONNECTING)},openChannel:function(e,t){var o=w.kg.timeStart(),a=window.performance.now(),c=0,u=e.name,i=e.service;return s.openChannel(e,(function(e){var s,l;o("Open channel callback called",{timeToOpen:window.performance.now()-a,replId:null===r||void 0===r?void 0:r.repl.id,language:null===r||void 0===r?void 0:r.repl.language,slug:null===r||void 0===r?void 0:r.repl.slug,errorMessage:null===(s=e.error)||void 0===s?void 0:s.message,reconnect:c,name:u,workspaceService:"string"===typeof i?i:r&&i(r)});var f=null===e||void 0===e||null===(l=e.channel)||void 0===l?void 0:l.onCommand((function(e){var t,r;"protocolError"===e.body&&n(new T.Z("goval panic").setExtra("message",null!==(r=null===(t=e.protocolError)||void 0===t?void 0:t.text)&&void 0!==r?r:"protocol error"))})),p=t(e);return function(e){p&&p(e),f&&f(),a=window.performance.now(),c++}}))},getConnectionState:function(){return c},exec:j(o().mark((function e(){var n,t,r,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=a.length,t=new Array(n),r=0;r<n;r++)t[r]=a[r];return e.abrupt("return",i({client:s,args:t}));case 2:case"end":return e.stop()}}),e)}))),execWithEnv:function(){var e=j(o().mark((function e(n){var t,r,a,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=c.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=c[a];return e.abrupt("return",i({client:s,args:r,env:n}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),close:function(){c!==N.e.DISCONNECTED&&s.close()},destroy:function(){s.destroy(),t.removeAllListeners()},client:function(){return s},getConnectionMetadata:function(){return s.getConnectionMetadata()},getContext:function(){return r},getVncUrl:function(){var e=s.getConnectionMetadata();if(!e||c!==N.e.CONNECTED)throw new Error("Cannot get vnc url when container is not connected");return(0,P.d)(e.token)},unrecoverableError:function(e,r){s.destroy(),t.removeAllListeners(),n(r?T.Z.wrap(e).setExtras(r):e)}}}!function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.PORT_OPEN="PORT_OPEN"}(Z||(Z={}))},56700:function(e,n,t){"use strict";var r;t.d(n,{e:function(){return r}}),function(e){e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.DISCONNECTED="DISCONNECTED"}(r||(r={}))},79523:function(e,n,t){"use strict";t.d(n,{S:function(){return o},w:function(){return r}});function r(){return window.__ENABLE_ALL_SERVICES}function o(){window.__ENABLE_ALL_SERVICES=!0}},76569:function(e,n,t){"use strict";t.d(n,{Z:function(){return p},t:function(){return f}});var r=t(34051),o=t.n(r),a=t(44894),c=(t(54098),t(25108));function u(e,n,t,r,o,a,c){try{var u=e[a](c),i=u.value}catch(s){return void t(s)}u.done?n(i):Promise.resolve(i).then(r,o)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function c(e){u(a,r,o,c,i,"next",e)}function i(e){u(a,r,o,c,i,"throw",e)}c(void 0)}))}}function s(){return l.apply(this,arguments)}function l(){return(l=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.Z.get("gurl")){e.next=3;break}return c.log("Getting gurl from localstorage"),e.abrupt("return",a.Z.get("gurl"));case 3:e.next=5;break;case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){var n=function(e){var n;try{n=new URL(e)}catch(r){return c.log("failed to parse gurl"),c.error(r),null}var t={secure:!1,port:""+n.port,host:n.hostname};return"wss:"===n.protocol?t.secure=!0:"ws:"!==n.protocol&&c.log(e,"Expected gurl protocol to be ws or wss, assuming insecure connection"),t.port||(t.port=t.secure?"443":"80"),t}(e);if(!n)return null;var t=n.secure,r=n.host,o=n.port;return"eval.repl.it"===r||"gp-v2.herokuapp.com"===r||"gp-v2.replit.com"===r||"eval.replit.com"===r?null:{id:"development",gurl:"ws".concat(t?"s":"","://").concat(r,":").concat(o),conmanURL:"http".concat(t?"s":"","://").concat(r,":").concat(o),proxy:"http".concat(t?"s":"","://").concat(r.replace("eval","proxy"),":").concat(o)}}function p(){return d.apply(this,arguments)}function d(){return(d=i(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",f(n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1311:function(e,n,t){"use strict";t.d(n,{d:function(){return i},h:function(){return u}});var r=t(50055),o=t(34155),a=t(48764).Buffer,c=o.env.PROXY_SUFFIX||"repl.co";function u(e){var n=e.split(".");if(4!==n.length)throw new Error("Invalid token: should have exactly 4 parts: "+e);for(var t=n[2].replace(/-/g,"+").replace(/_/g,"/");t.length%4;)t+="=";var o=window.atob(t);if(o.length<64)throw new Error("Invalid token: signed part is too short: "+o.length);var c=o.substring(0,o.length-64);try{return r.api.ReplToken.decode(new a(c,"base64"))}catch(u){return JSON.parse(window.atob(c))}}function i(e){var n=u(e).repl,t=n.user,r=n.slug,o=n.id,a="".concat(r,"--").concat(t);return a.length>63&&(a="".concat(o,".id")),-1!==c.indexOf("repl.localhost:8080")?"ws://".concat(a,".").concat(c):"wss://".concat(a,".").concat(c)}},77020:function(){}}]);
//# sourceMappingURL=9838-4ea190e929e1e14d.js.map