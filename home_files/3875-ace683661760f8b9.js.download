"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3875],{40746:function(e,t,r){function n(e,t){var r=t.existing,n=t.getKey,o=new Map,i=!0,l=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value;o.set(n(s),s)}}catch(R){l=!0,a=R}finally{try{i||null==c.return||c.return()}finally{if(l)throw a}}var d=new Set,f=[],p=!0,h=!1,v=void 0;try{for(var g,m=r[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var b=n(g.value),y=o.get(b);y&&(f.push(y),d.add(b))}}catch(R){h=!0,v=R}finally{try{p||null==m.return||m.return()}finally{if(h)throw v}}var w=!0,Z=!1,x=void 0;try{for(var S,k=e[Symbol.iterator]();!(w=(S=k.next()).done);w=!0){var O=S.value;d.has(n(O))||f.push(O)}}catch(R){Z=!0,x=R}finally{try{w||null==k.return||k.return()}finally{if(Z)throw x}}return f}r.d(t,{Z:function(){return n}})},45130:function(e,t,r){r.d(t,{Z:function(){return nr}});var n=r(35944),o=r(67294),i=r(54929),l=r(88768),a=r(95694),u=r(1517),c=r(34051),s=r.n(c),d=r(28614),f=r(1769),p=r(45734),h=r(92432),v=r(89431),g=r(4993),m=r(41664),b=r.n(m),y=r(70917),w=r(67938),Z=r(66552),x=r(3204),S=r(67615),k=r(16055),O=r(53009),R=r(74302),C=r(14285),P=r(84409);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){j(e,t,r[t])}))}return e}function B(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=(0,i.K)("a"),E=(0,y.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function V(e){var t=e.post,r=t.repl,o=t.user,l=r.isTemplate?"Template":"Repl";return(0,n.BX)(i.Z,{css:x.l0.colWithGap(8),children:[(0,n.BX)(i.Z,{css:[x.l0.flex.row,x.l0.align.center,x.l0.justify.spaceBetween],children:[(0,n.tZ)(i.Z,{css:[x.l0.flex.row,x.l0.align.center],children:(0,n.BX)(i.Z,{css:[x.l0.rowWithGap(8),x.l0.align.center],children:[(0,n.tZ)(P.Z,{size:24,username:o.username,src:o.image}),(0,n.BX)(i.Z,{css:x.l0.rowWithGap(4),children:[(0,n.tZ)(w.x,{children:o.username}),(0,n.BX)(w.x,{color:"dimmest",children:[" published a ",l]})]})]})}),(0,n.tZ)(C.Z,{size:12})]}),(0,n.BX)(Z.Z,{css:[x.l0.borderRadius(8),x.l0.colWithGap(8),x.l0.p(8),x.l0.position.relative,{border:"1px solid "+x.TV.outlineDimmest}],children:[(0,n.tZ)(i.Z,{css:[x.l0.colWithGap(16)],children:(0,n.tZ)(i.Z,{css:[x.l0.rowWithGap(16),x.l0.justify.spaceBetween],children:(0,n.BX)(i.Z,{css:[x.l0.rowWithGap(8),x.l0.align.start,x.l0.flex.growAndShrink(1)],children:[(0,n.tZ)(O.ZP,{iconUrl:r.iconUrl,alt:r.title,size:84,css:[x.l0.backgroundColor.backgroundHigher]}),(0,n.BX)(i.Z,{css:[x.l0.flex.growAndShrink(1),x.l0.colWithGap(4)],children:[(0,n.BX)(i.Z,{css:[x.l0.flex.row],children:[(0,n.tZ)(b(),T({passHref:!0},(0,R.j3)(r),{children:(0,n.tZ)(A,{css:[{color:"inherit"},E,x.l0.flex.growAndShrink(1),x.l0.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,n.tZ)(w.x,{variant:"subheadBig",children:r.title})})})),r.isTemplate&&(0,n.tZ)(G,{})]}),r.description?(0,n.tZ)(w.x,{color:"dimmer",maxLines:2,children:r.description}):null]})]})})}),(0,n.BX)(i.Z,{css:[x.l0.rowWithGap(8),x.l0.justify.spaceBetween,x.l0.minHeight(24)],children:[(0,n.tZ)(S.Z,{repl:{id:r.id,runCount:0,likeCount:0,commentCount:0}}),(0,n.tZ)(i.Z,{css:[x.l0.position.relative,{zIndex:1},x.l0.flex.shrink(1)],children:(0,n.tZ)(k.Vs,{tags:r.tags,onTagClick:function(e){return e.preventDefault()}})})]})]})]})}var G=function(){return(0,n.tZ)("span",{css:[x.l0.display.inlineFlex,x.l0.align.center,x.l0.height(24),x.l0.px(8),x.l0.borderRadius(16),x.l0.backgroundColor.yellowDimmest,x.l0.color.yellowStrongest,x.l0.justify.center,x.l0.ml(8),{fontSize:x.TV.fontSizeSmall,lineHeight:x.TV.fontSizeSmall}],children:"Template"})},F=function(){return(0,n.BX)(i.Z,{css:[x.l0.colWithGap(8),{opacity:.5}],children:[(0,n.BX)(i.Z,{css:[x.l0.flex.row,x.l0.align.center,x.l0.flex.grow(1),x.l0.justify.spaceBetween],children:[(0,n.BX)(i.Z,{css:[x.l0.rowWithGap(8),x.l0.align.center],children:[(0,n.tZ)("span",{css:[x.l0.backgroundColor.backgroundHigher,x.l0.width(24),x.l0.height(24),x.l0.borderRadius(16)]}),(0,n.tZ)("span",{css:[x.l0.backgroundColor.backgroundHigher,x.l0.width(126),x.l0.height(12),x.l0.borderRadius(4)]})]}),(0,n.tZ)("span",{css:[x.l0.backgroundColor.backgroundHigher,x.l0.width(12),x.l0.height(12),x.l0.borderRadius(8)]})]}),(0,n.BX)(i.Z,{css:[x.l0.backgroundColor.backgroundDefault,x.l0.width("100%"),x.l0.height(132),x.l0.borderRadius(8),x.l0.colWithGap(8),x.l0.p(8)],children:[(0,n.BX)(i.Z,{css:x.l0.rowWithGap(8),children:[(0,n.tZ)("span",{css:[x.l0.backgroundColor.backgroundHigher,x.l0.height(84),x.l0.width(84),x.l0.borderRadius(4)]}),(0,n.BX)(i.Z,{css:[x.l0.colWithGap(12),x.l0.pt(4),x.l0.flex.grow(1)],children:[(0,n.tZ)("span",{css:[x.l0.backgroundColor.backgroundHigher,x.l0.width(80),x.l0.height(16),x.l0.borderRadius(4)]}),(0,n.BX)(i.Z,{css:x.l0.colWithGap(8),children:[(0,n.tZ)("span",{css:[x.l0.backgroundColor.backgroundHigher,x.l0.width("100%"),x.l0.height(12),x.l0.borderRadius(4)]}),(0,n.tZ)("span",{css:[x.l0.backgroundColor.backgroundHigher,x.l0.width("80%"),x.l0.height(12),x.l0.borderRadius(4)]})]})]})]}),(0,n.BX)(i.Z,{css:[x.l0.flex.row,x.l0.flex.grow(1),x.l0.align.center,x.l0.justify.spaceBetween],children:[(0,n.tZ)(i.Z,{css:x.l0.rowWithGap(16),children:B(Array(3)).map((function(e,t){return(0,n.BX)(i.Z,{css:[x.l0.rowWithGap(4),x.l0.align.center],children:[(0,n.tZ)("span",{css:[x.l0.backgroundColor.backgroundHigher,x.l0.width(12),x.l0.height(12),x.l0.borderRadius(8)]}),(0,n.tZ)("span",{css:[x.l0.backgroundColor.backgroundHigher,x.l0.width(16),x.l0.height(8),x.l0.borderRadius(2)]})]},t)}))}),(0,n.tZ)(i.Z,{css:x.l0.rowWithGap(4),children:B(Array(2)).map((function(e,t){return(0,n.tZ)("span",{css:[x.l0.backgroundColor.backgroundHigher,x.l0.width(48),x.l0.height(24),x.l0.borderRadius(16)]},t)}))})]})]})]})},U=r(64063),D=r.n(U),X=r(33108),W=r(56408),_=r(65577);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function H(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){L(i,n,o,l,a,"next",e)}function a(e){L(i,n,o,l,a,"throw",e)}l(void 0)}))}}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e){return e.message||"Something went wrong saving updates to your Repl"}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function $(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){Y(i,n,o,l,a,"next",e)}function a(e){Y(i,n,o,l,a,"throw",e)}l(void 0)}))}}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e){var t,r,n,o,i,l,a;return e.error?e.error.message||"Something went wrong saving your Cover page":"NotFoundError"===(null===(t=e.data)||void 0===t||null===(r=t.setReplViewSettings)||void 0===r?void 0:r.__typename)||"UnauthorizedError"===(null===(n=e.data)||void 0===n||null===(o=n.setReplViewSettings)||void 0===o?void 0:o.__typename)||"UserError"===(null===(i=e.data)||void 0===i||null===(l=i.setReplViewSettings)||void 0===l?void 0:l.__typename)?e.data.setReplViewSettings.message:(null===(a=e.data)||void 0===a?void 0:a.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ee(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function te(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){ee(i,n,o,l,a,"next",e)}function a(e){ee(i,n,o,l,a,"throw",e)}l(void 0)}))}}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e){var t,r,n,o,i,l,a;return e.error?e.error.message||"Something went wrong saving your Repl Tags":"NotFoundError"===(null===(t=e.data)||void 0===t||null===(r=t.setReplTags)||void 0===r?void 0:r.__typename)||"UnauthorizedError"===(null===(n=e.data)||void 0===n||null===(o=n.setReplTags)||void 0===o?void 0:o.__typename)||"UserError"===(null===(i=e.data)||void 0===i||null===(l=i.setReplTags)||void 0===l?void 0:l.__typename)?e.data.setReplTags.message:(null===(a=e.data)||void 0===a?void 0:a.setReplTags)&&"Repl"!==e.data.setReplTags.__typename?"Something went wrong posting your Repl":void 0}var oe=r(7391),ie=r(78143),le=r(56834);function ae(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function ue(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){ae(i,n,o,l,a,"next",e)}function a(e){ae(i,n,o,l,a,"throw",e)}l(void 0)}))}}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function de(e,t,r){return(de=se()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&ve(o,r.prototype),o}).apply(null,arguments)}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}function he(e,t){return!t||"object"!==ge(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function me(e){var t="function"===typeof Map?new Map:void 0;return me=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return de(e,arguments,fe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ve(n,e)},me(e)}function be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fe(e);if(t){var o=fe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return he(this,r)}}var ye,we=1e3;function Ze(e){return"repl_file"===e||"repl_image"===e}!function(e){e.ReplFile="repl_file",e.ReplImage="repl_image"}(ye||(ye={}));var xe=function(e){pe(r,e);var t=be(r);function r(){return ce(this,r),t.apply(this,arguments)}return r}(me(Error)),Se=function(e){pe(r,e);var t=be(r);function r(){return ce(this,r),t.apply(this,arguments)}return r}(me(Error)),ke=function(e){pe(r,e);var t=be(r);function r(){return ce(this,r),t.apply(this,arguments)}return r}(me(Error));function Oe(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your Repl a title"}}function Re(e){return e?e.length>we?{message:"Description should not be more than ".concat(we," characters")}:void 0:{message:"What does this Repl do?"}}function Ce(e){var t,r,n,i,a,u=(0,X.Y)(e.replId||null,(function(e){return e?null:{message:"Select a Repl to share"}})),c=(0,l.Mq0)({variables:{id:u.value||""},skip:!u.value}),d="Repl"===(null===(t=c.data)||void 0===t?void 0:t.repl.__typename)?c.data.repl:null,f=(null===d||void 0===d?void 0:d.publishedAs)===l.O2h.Template||(null===d||void 0===d?void 0:d.lastPublishedAt),p=(0,X.Y)("",Oe),h=(0,X.Y)("",Re),v=(0,X.Y)(null,(function(){return null})),g=(0,X.Y)(ye.ReplImage,(function(){return null})),m=(0,X.Y)(null,(function(){return null})),b=(0,X.Y)("",e.fileValidator),y=(0,X.Y)([],(function(){return null})),w=(0,_.Z)(d),Z=(0,X.Y)(!1,(function(e){var t=w.current;return e&&(null===t||void 0===t?void 0:t.lastPublishedAt)?{message:"This Repl has already been published. Please unpublish before publishing as a Template."}:e||(null===t||void 0===t?void 0:t.publishedAs)!==l.O2h.Template?void 0:{message:"This Repl has already been published as a Template. Please unpublish before publishing as a Repl."}})),x=[u,p,h,v,g,m,y,b,Z],S=function(){var e=q((0,l.F1G)(),2),t=e[0],r=e[1];function n(){return(n=$(s().mark((function e(n){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.loading){e.next=2;break}return e.abrupt("return",{data:null,error:null});case 2:return e.prev=2,e.next=5,t({variables:{input:n}});case 5:return o=e.sent,e.abrupt("return",{data:o.data,error:J(o)});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{data:null,error:"Something went wrong saving your Cover page"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return{data:r.data,loading:r.loading,error:J(r),setReplViewSettings:function(e){return n.apply(this,arguments)}}}(),k=function(){var e=re((0,l.nYE)(),2),t=e[0],r=e[1];function n(){return(n=te(s().mark((function e(n){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.loading){e.next=2;break}return e.abrupt("return",{data:null,error:null});case 2:return e.prev=2,e.next=5,t({variables:{input:n}});case 5:return o=e.sent,e.abrupt("return",{data:o.data,error:ne(o)});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{data:null,error:"Something went wrong saving your Repl Tags"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return{data:r.data,loading:r.loading,error:ne(r),setReplTags:function(e){return n.apply(this,arguments)}}}(),O=function(){var e=z((0,l.NfL)(),2),t=e[0],r=e[1];function n(){return(n=H(s().mark((function e(n){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.loading){e.next=2;break}return e.abrupt("return",{data:null,error:null});case 2:return e.prev=2,e.next=5,t({variables:{input:n}});case 5:return o=e.sent,e.abrupt("return",{data:o.data,error:null});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{data:null,error:N(e.t0)});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return{data:r.data,loading:r.loading,error:r.error&&N(r.error),updateRepl:function(e){return n.apply(this,arguments)}}}(),R=(0,oe.O)(),C=(0,ie.r)(),P=(null===d||void 0===d||null===(r=d.replViewSettings)||void 0===r?void 0:r.defaultView)&&Ze(d.replViewSettings.defaultView)?d.replViewSettings.defaultView:ye.ReplImage,I=(0,_.Z)(p.setValue),j=(0,_.Z)(h.setValue),T=(0,_.Z)(y.setValue),B=(0,_.Z)(v.setValue),A=(0,_.Z)(m.setValue),E=(0,_.Z)(g.setValue),V=(0,_.Z)(b.setValue),G=(0,_.Z)(Z.setValue);(0,o.useEffect)((function(){var e,t,r,n;d&&(G.current("Template"===d.publishedAs),E.current(P),V.current(null!==(t=null===(e=d.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==t?t:""),I.current(d.isRenamed?d.title:""),j.current(null!==(r=d.description)&&void 0!==r?r:""),T.current(d.tags),B.current(d.iconUrl.endsWith(".svg")?null:d.iconUrl),A.current(null!==(n=d.imageUrl)&&void 0!==n?n:null))}),[d,A,B,T,I,j,P,E,V,G]);var F,U=(0,W.W)(v.setValue),M=U.previewUrl||v.value||(null===d||void 0===d?void 0:d.iconUrl)||(null===d||void 0===d?void 0:d.templateInfo.iconUrl),L=null!==(F=null===(n=x.filter((function(e){return(e!==b||g.value===ye.ReplFile)&&e.error})))||void 0===n||null===(i=n[0])||void 0===i||null===(a=i.error)||void 0===a?void 0:a.message)&&void 0!==F?F:null;function K(){return(K=ue(s().mark((function e(){var t,r,n,o,i,a,u,c,w,Z,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=3;break}throw new xe("Missing repl");case 3:if(r=d.title!==p.value,n=d.description!==h.value,o=d.iconUrl!==v.value,i="repl_image"===g.value&&d.imageUrl!==m.value,a=b.value&&"repl_file"===g.value&&(null===(t=d.replViewSettings)||void 0===t?void 0:t.replFile)!==b.value,u=g.value&&P!==g.value,c=!D()(d.tags,y.value),!(r||n||o)){e.next=18;break}if(!(p.error||h.error||v.error)){e.next=13;break}throw new xe;case 13:return e.next=15,O.updateRepl({id:d.id,title:r?p.value:void 0,description:n?h.value:void 0,iconUrl:o?v.value:void 0});case 15:if(!(w=e.sent).error){e.next=18;break}throw new Se(w.error);case 18:if(!(u||i||a)){e.next=26;break}if(!(g.value===ye.ReplImage&&m.error||g.value===ye.ReplFile&&b.error)){e.next=21;break}throw new xe;case 21:return e.next=23,S.setReplViewSettings({replId:d.id,defaultView:"repl_image"===g.value?l.bVG.ReplImage:l.bVG.ReplFile,replImage:i?m.value:void 0,replFile:a?b.value:void 0});case 23:if(!(Z=e.sent).error){e.next=26;break}throw new Se(Z.error);case 26:if(!c||!f){e.next=34;break}if(!y.error){e.next=29;break}throw new xe;case 29:return e.next=31,k.setReplTags({replId:d.id,tags:y.value.map((function(e){return e.id}))});case 31:if(!(x=e.sent).error){e.next=34;break}throw new Se(x.error);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=ue(s().mark((function t(){var r,n,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d){t.next=2;break}throw new xe("Missing repl");case 2:if(!L){t.next=4;break}throw new xe(null!==L&&void 0!==L?L:"Something went wrong");case 4:if(!Z.value){t.next=19;break}return t.next=7,C.createDeployment({input:{replId:d.id,description:h.value,iconUrl:M||d.iconUrl}});case 7:if(!(r=t.sent).error){t.next=10;break}throw new ke(r.error);case 10:if(!!D()(d.tags,y.value)){t.next=17;break}return t.next=14,k.setReplTags({replId:d.id,tags:y.value.map((function(e){return e.id}))});case 14:if(!(n=t.sent).error){t.next=17;break}throw new ke(n.error);case 17:return(0,le.j)(le.U3.POST_MADE,{source:e.source,replType:"template_repl",title:p.value,description:h.value,tags:y.value.map((function(e){return e.id})),defaultView:g.value}),t.abrupt("return");case 19:return t.next=21,R.publish({input:{replId:d.id,tags:y.value.map((function(e){return e.id}))}});case 21:if(!(o=t.sent).error){t.next=24;break}throw new ke(o.error);case 24:(0,le.j)(le.U3.POST_MADE,{source:e.source,replType:"regular_repl",title:p.value,description:h.value,tags:y.value.map((function(e){return e.id})),defaultView:g.value});case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Q=O.loading||S.loading||k.loading,ee=O.error||S.error||k.error,ae=R.loading||C.loading,ce=R.error||C.error;return{selectedRepl:d,isReplLoading:c.loading,replLoadingError:c.error,replIdField:u,replTitleField:p,replDescriptionField:h,iconUrlField:v,coverDefaultViewField:g,coverUrlField:m,coverFileField:b,tagsField:y,isTemplateField:Z,replIconInput:U,replIconUrl:M,inputError:L,save:function(){return K.apply(this,arguments)},isSaving:Q,savingError:ee,publish:function(){return Y.apply(this,arguments)},isPublishing:ae,publishingError:ce,isPublished:f}}var Pe=o.createContext(null),Ie=function(e){var t=o.useContext(Pe);if(!t)throw new Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},je=function(){var e=o.useContext(Pe);if(!e)throw new Error("usePublishForm must be used within a PublishInputContext");return e},Te=r(69056);function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ae(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Be(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ee=function(){var e=Ie("tags");return(0,n.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,n.tZ)(a.G7,{css:[a.l0.colWithGap(4)],children:(0,n.tZ)(Te.Z,{max:5,tags:e.value,onAdd:function(t){return e.setValue(Ae(e.value).concat([t]))},onRemove:function(t){return e.setValue(Ae(e.value.slice(0,t)).concat(Ae(e.value.slice(t+1))))}})}),(0,n.BX)(a.G7,{css:a.l0.rowWithGap(4),children:[(0,n.tZ)(a.xv,{color:"dimmer",variant:"small",children:"Adding tags helps others find your Repl."}),(0,n.BX)(a.xv,{color:"dimmest",variant:"small",children:[e.value.length,"/",5]})]})]})},Ve=r(88942),Ge=r(98741),Fe=r(37424);function Ue(e){var t=e.error;return t?(0,n.BX)(a.G7,{css:[a.l0.rowWithGap(4),a.l0.align.center],children:[(0,n.tZ)(d.Z,{css:[a.l0.color.accentNegativeDefault]}),(0,n.tZ)(a.xv,{multiline:!0,css:[a.l0.flex.growAndShrink(1)],children:t.message})]}):null}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Xe(e,t,r[t])}))}return e}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return De(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return De(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Me=(0,a.KD)("label"),Le=o.forwardRef((function(e,t){return(0,n.tZ)(Me,We({},e,{ref:t,css:a.l0.color.foregroundDimmer}))})),He=function(){var e=(0,Fe.H)()("repl"),t=Ie("replId"),r=Ie("iconUrl"),o=(0,Ge.cX)(),i=(0,Ve.Kb)({id:e,items:o.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;o.setSearchValue(t)},onSelectedItemChange:function(e){(null===e||void 0===e?void 0:e.selectedItem)&&(t.setValue(e.selectedItem.id),i.closeMenu())},itemToString:Ge._J});return(0,n.BX)(a.G7,{css:[a.l0.colWithGap(4)],children:[(0,n.tZ)(Le,{css:a.l0.color.foregroundDimmer,htmlFor:e,children:"Repl"}),(0,n.tZ)(Ge.BP,{getComboboxProps:i.getComboboxProps,getInputProps:i.getInputProps,getItemProps:i.getItemProps,getMenuProps:i.getMenuProps,isOpen:i.isOpen,highlightedIndex:i.highlightedIndex,inputValue:i.inputValue,selectedRepl:i.selectedItem?We({},i.selectedItem,{iconUrl:r.value||i.selectedItem.iconUrl}):void 0,repls:o.repls,loading:o.loading,onFocus:function(e){i.selectedItem&&(e.preventDefault(),e.currentTarget.select(),o.setSearchValue("")),i.openMenu()}})]})},ze=function(){var e=(0,Fe.H)(),t=e("replName"),r=e("replDescription"),i=je(),l=i.replIdField,u=i.replTitleField,c=i.replDescriptionField,s=i.isSaving,d=i.selectedRepl,f=d&&!d.isRenamed?"Default name: ".concat(d.title):"Enter a name for your Repl",p=_e(o.useState(!0),2),h=p[0],v=p[1],g=_e(o.useState(!0),2),m=g[0],b=g[1];return(0,n.BX)(a.G7,{css:[a.l0.colWithGap(16),a.l0.flex.growAndShrink(1)],children:[(!l.value||l.touched)&&(0,n.tZ)(He,{}),(0,n.BX)(a.G7,{css:[a.l0.colWithGap(4)],children:[(0,n.BX)(a.G7,{css:[a.l0.flex.row,a.l0.align.baseline,a.l0.justify.spaceBetween],children:[(0,n.tZ)(Le,{css:[a.l0.color.foregroundDimmer,{lineHeight:a.TV.lineHeightSmall}],htmlFor:t,children:"Repl name"}),(0,n.BX)(a.xv,{css:{color:u.value.length>60?a.TV.accentNegativeStronger:a.TV.foregroundDimmest},children:[u.value.length,"/",60]})]}),(0,n.tZ)(a.II,{id:t,disabled:!l.value||s,value:u.value,onChange:function(e){u.setValue(e.currentTarget.value),h&&v(!1)},placeholder:f}),h?null:(0,n.tZ)(Ue,{error:u.error})]}),(0,n.BX)(a.G7,{css:[a.l0.colWithGap(4)],children:[(0,n.BX)(a.G7,{css:[a.l0.flex.row,a.l0.align.baseline,a.l0.justify.spaceBetween],children:[(0,n.tZ)(Le,{css:[a.l0.color.foregroundDimmer,{lineHeight:a.TV.lineHeightSmall}],htmlFor:r,children:"Repl description"}),(0,n.BX)(a.xv,{css:{color:c.value.length>we?a.TV.accentNegativeStronger:a.TV.foregroundDimmest},children:[c.value.length,"/",we]})]}),(0,n.tZ)(a.B,{id:r,value:c.value,disabled:!l.value||s,onChange:function(e){c.setValue(e.currentTarget.value),m&&b(!1)},placeholder:"What does this Repl do?",css:{resize:"vertical",maxHeight:218,lineHeight:a.TV.lineHeightDefault}}),m?null:(0,n.tZ)(Ue,{error:c.error})]})]})},Ne=function(e){var t=e.showPlayButton,r=e.children;return(0,n.BX)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,n.tZ)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden"},children:r}),(0,n.BX)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,n.tZ)("rect",{width:"268",height:"17",fill:a.TV.backgroundDefault}),(0,n.tZ)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:a.TV.accentPositiveDimmer}),(0,n.tZ)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:a.TV.backgroundHighest}),(0,n.tZ)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:a.TV.backgroundHighest}),(0,n.tZ)("rect",{x:"1",y:"18",width:"266",height:"1",fill:a.TV.outlineDimmer}),t&&(0,n.tZ)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:a.TV.white}),(0,n.tZ)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:a.TV.outlineDimmer,strokeWidth:"1"})]})]})},Ke=r(72829);function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ye(e,t,r[t])}))}return e}var qe=function(e){var t=function(e){var t=o.useRef(null),r={onClick:function(e){var r;return e.preventDefault(),e.stopPropagation(),null===(r=t.current)||void 0===r?void 0:r.click()}};return{inputProps:{onChange:function(t){var r=t.target,n=r.validity,o=r.files;if(n.valid){var i=o?o[0]:null;i&&e(i)}},"aria-hidden":"true",ref:t,accept:Ke.W9.join(","),type:"file"},buttonProps:r,inputRef:t}}(e.onFile),r=t.inputProps,i=t.buttonProps;return(0,n.BX)(n.HY,{children:[(0,n.tZ)("input",$e({},r,{css:{display:"none"}})),o.cloneElement(e.children,i)]})},Je=r(20255),Qe=r(67289);function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tt(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function rt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){tt(i,n,o,l,a,"next",e)}function a(e){tt(i,n,o,l,a,"throw",e)}l(void 0)}))}}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e){return e.slice().sort((function(e,t){return e.localeCompare(t)})).map((function(e){return{file:e,pathDepth:(0,Qe.U$)(e)}})).sort((function(e,t){return e.pathDepth-t.pathDepth})).map((function(e){return e.file}))}function lt(e){var t=e.fs,r=ot(o.useState({isLoading:!0,error:null,files:[]}),2),n=r[0],i=r[1];return o.useEffect((function(){function e(){return(e=rt(s().mark((function e(){var r,n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.listFiles();case 3:if(!(r=e.sent).error){e.next=6;break}throw new Error(r.error);case 6:o=it(null!==(n=r.files)&&void 0!==n?n:[]),i({isLoading:!1,error:null,files:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),i({isLoading:!1,error:"Could not load files",files:[]});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){nt(e,t,r[t])}))}return e}({},n)}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ut(e,t,r[t])}))}return e}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return at(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return at(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dt=(0,a.KD)("ol"),ft=(0,a.KD)("li"),pt=(0,y.iv)([x.l0.py(4),x.l0.borderRadius(8),{border:"1px solid ".concat(a.TV.outlineDimmest),borderRadius:a.TV.borderRadius8,backgroundColor:a.vb.interactiveBackground,zIndex:a.n0,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:a.TV.space8,listStyle:"none"}]),ht={backgroundColor:a.vb.interactiveBackgroundActive},vt={backgroundColor:a.TV.accentPrimaryDefault},gt=(0,y.iv)([x.l0.p(8),{":not([disabled])":{cursor:"pointer",":hover":ct({},ht),":active":ct({},vt)}}]);function mt(e){var t=e.fs,r=e.initiallySelectedFile,i=e.onFileSelect,l=e.onClear,u=o.useRef(null),c=lt({fs:t}),s=c.isLoading,d=c.files,f=c.error,p=function(e){var t=e.files,r=e.inputRef,n=e.initiallySelectedFile,i=st(o.useState(!1),2),l=i[0],a=i[1],u=st(o.useState(t),2),c=u[0],s=u[1],d=o.useCallback((function(e){return t.filter((function(t){return t.toLowerCase().includes(e.toLowerCase())}))}),[t]),f=(0,Ve.Kb)({items:c,isOpen:l,initialInputValue:n,initialSelectedItem:c.find((function(e){return e===n})),onIsOpenChange:function(e){a(Boolean(e.isOpen))},onInputValueChange:function(e){var t;s(d(null!==(t=e.inputValue)&&void 0!==t?t:""))}}),p=o.useCallback((function(){var e;a(!1),null===(e=r.current)||void 0===e||e.blur()}),[r]);return o.useEffect((function(){var e;s(d(null!==(e=f.inputValue)&&void 0!==e?e:""))}),[t,d,f.inputValue]),o.useEffect((function(){f.selectedItem&&p()}),[f.selectedItem,p]),ct({},f,{closeMenu:p,items:c})}({files:d,inputRef:u,initiallySelectedFile:r}),h=(0,_.Z)(i);return o.useEffect((function(){p.selectedItem&&h.current(p.selectedItem)}),[p.selectedItem,h]),(0,n.BX)(a.G7,{children:[(0,n.tZ)(a.G7,ct({},p.getComboboxProps({refKey:"innerRef"}),{css:[x.l0.position.relative],children:(0,n.tZ)(a.E1,ct({},p.getInputProps({onFocus:p.openMenu,ref:u,refKey:"inputRef",disabled:s,placeholder:"Search your files"}),{onClear:function(){var e;p.reset(),null===(e=u.current)||void 0===e||e.focus(),l()},loading:s}))})),(0,n.BX)(a.G7,ct({},p.getMenuProps({refKey:"innerRef"}),{css:[x.l0.position.relative],children:[f&&(0,n.tZ)(a.G7,{css:[x.l0.p(8)],children:(0,n.tZ)(a.xv,{children:"Something went wrong loading your files. Please try again."})}),!f&&p.isOpen&&(0,n.tZ)(dt,{css:[pt],children:p.items.length>0?p.items.map((function(e,t){return(0,n.tZ)(ft,ct({css:[gt,p.highlightedIndex===t&&ht,e===p.selectedItem&&vt]},p.getItemProps({item:e,index:t,onClick:function(){p.closeMenu()}}),{children:(0,n.tZ)(a.xv,{children:e})}),e)})):(0,n.tZ)(ft,{css:[x.l0.p(8)],children:(0,n.BX)(a.xv,{children:['No files found for "',p.inputValue,'"']})})})]}))]})}var bt=r(45309),yt=[{value:ye.ReplImage,text:"Photo"},{value:ye.ReplFile,text:"File"}],wt=function(e){var t=e.fs,r=(0,Fe.H)(),o=r("coverPage"),i=je(),l=i.selectedRepl,u=i.coverFileField,c=i.coverUrlField,s=i.coverDefaultViewField,d=(0,W.W)(c.setValue);return(0,n.BX)(a.G7,{css:[a.l0.colWithGap(16)],children:[(0,n.BX)(a.G7,{css:a.l0.colWithGap(12),children:[(0,n.tZ)(a.G7,{css:[a.l0.rowWithGap(8)],children:(0,n.tZ)(a.Ee,{tag:"fieldset",css:[a.l0.rowWithGap(24)],name:o,value:s.value,onChange:function(e){Ze(e.target.value)&&s.setValue(e.target.value)},children:yt.map((function(e){return(0,n.BX)(a.G7,{css:[a.l0.rowWithGap(8)],children:[(0,n.tZ)(a.Y8,{id:r(e.value),value:e.value}),(0,n.tZ)("label",{htmlFor:r(e.value),children:e.text})]},e.value)}))})}),s.value===ye.ReplImage&&(0,n.tZ)(n.HY,{children:(0,n.tZ)(qe,{onFile:function(e){return d.uploadImage(e,bt.N.ReplCoverImage)},children:(0,n.tZ)(a.zx,{text:"Upload a cover photo",iconLeft:(0,n.tZ)(Je.Z,{})})})}),s.value===ye.ReplFile&&(0,n.BX)(a.G7,{css:[a.l0.colWithGap(4)],children:[(0,n.tZ)(mt,{fs:t,initiallySelectedFile:u.value,onFileSelect:u.setValue,onClear:function(){return u.setValue("")}},null===l||void 0===l?void 0:l.id),(0,n.tZ)(Ue,{error:u.error})]})]}),s.value===ye.ReplImage&&(0,n.tZ)(Ne,{showPlayButton:s.value===ye.ReplImage&&!!c.value,children:s.value===ye.ReplImage&&!!c.value&&(0,n.tZ)("img",{src:c.value,alt:"cover",width:"100%"})})]})},Zt=r(35060),xt=function(){var e=Ie("iconUrl"),t=je(),r=t.replIconInput,o=t.replIconUrl,i=Boolean(e.value&&!e.value.endsWith(".svg"));return(0,n.BX)(a.G7,{css:[a.l0.colWithGap(16),a.l0.align.center],children:[(0,n.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,n.BX)(a.G7,{css:[a.l0.rowWithGap(8)],children:[(0,n.tZ)(qe,{onFile:function(e){return r.uploadImage(e,bt.N.ReplIcon)},css:a.l0.backgroundColor.accentNegativeDefault,children:(0,n.tZ)(a.zx,{text:i?"Change image":"Upload image",iconLeft:(0,n.tZ)(Je.Z,{}),css:[a.l0.backgroundColor.backgroundHigher],type:"button",stretch:!0})}),i&&(0,n.tZ)(a.zx,{text:"Remove image",onClick:function(){return e.setValue(null)},css:[a.l0.color.accentNegativeStronger,a.l0.backgroundColor.backgroundHigher],iconLeft:(0,n.tZ)(Zt.Z,{}),type:"button"})]}),r.error?(0,n.tZ)(a.G7,{children:(0,n.tZ)(a.E_,{icon:(0,n.tZ)(d.Z,{}),colorway:"negative",text:r.error,closable:!0,closeAction:r.clearError})}):null]}),(0,n.tZ)(O.LN,{alt:"icon",size:84,iconUrl:o,isLoading:Boolean(r.previewUrl),css:[a.l0.backgroundColor.backgroundHigher]})]})},St=r(50658),kt=r(56700),Ot=r(81544),Rt=r(22654),Ct=r(27754),Pt=r(35932),It=r(11938);function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e){var t=e.repl,r=e.currentUser,n=Tt(o.useState(""),2),i=n[0],l=n[1],a=Tt(o.useState((function(){return function(e){var t=e.setBsodSentryEventId,r=(0,Ct.Z)({onUnrecoverableError:function(e){St.Tb(e);var r=(0,Pt.Z)(e,{tags:{publish2:"true"}});t(r)}}),n=(0,Rt.Z)({container:r});return{container:r,fs:n,dotReplit:(0,It.Z)({container:r,fs:n})}}({setBsodSentryEventId:l})})),1),u=a[0],c=u.container,s=u.fs,d=u.dotReplit,f=Tt(o.useState((function(){return c.getConnectionState()===kt.e.CONNECTED})),2),p=f[0],h=f[1],v=(0,Ot.b)(t?{repl:t,currentUser:r}:null);return o.useEffect((function(){if(t&&v&&c.getConnectionState()===kt.e.DISCONNECTED)return c.connect({context:v}),function(){return c.close()}}),[t,c,v]),o.useEffect((function(){return c.onConnectionStateChanged((function(e){h(e===kt.e.CONNECTED)}))}),[c]),{isConnected:p,container:c,fs:s,dotReplit:d,didBsod:Boolean(i),devClearBsod:function(){return l("")}}}var At=r(17221),Et=r(46846);function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gt(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function Ft(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){Gt(i,n,o,l,a,"next",e)}function a(e){Gt(i,n,o,l,a,"throw",e)}l(void 0)}))}}function Ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e){var t=e.dotReplit,r=Dt(o.useState({isLoading:!0,error:null,entryPoint:null}),2),n=r[0],i=r[1];return o.useEffect((function(){function e(){return(e=Ft(s().mark((function e(){var r,n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,t.getConfig();case 4:if(!(n=e.sent).error){e.next=7;break}throw new Error(n.errorMessage);case 7:i({isLoading:!1,error:null,entryPoint:null!==(o=null===n||void 0===n||null===(r=n.config)||void 0===r?void 0:r.entrypoint)&&void 0!==o?o:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),i({isLoading:!1,error:"Could not load .replit config",entryPoint:null});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ut(e,t,r[t])}))}return e}({},n)}var Wt=r(8286),_t=(0,a.KD)("button"),Mt=function(){return(0,n.tZ)(i.Z,{css:[a.l0.flex.row,a.l0.flex.grow(1),{borderTop:"1px solid ".concat(a.TV.outlineDimmest)}]})},Lt=function(e){var t=e.isActive,r=e.isComplete,o=e.children,i=e.onClick,l=e.disabled;return(0,n.BX)(_t,{type:"button",css:[a.d$,a.l0.position.relative,a.gU.nofill,t&&a.l0.backgroundColor.backgroundHigher,a.l0.p(4),a.l0.borderRadius(4)],onClick:i,disabled:l,children:[(0,n.tZ)(a.xv,{variant:"small",children:o}),r&&(0,n.tZ)(Wt.Z,{size:6,strokeWidth:6,color:a.TV.foregroundDimmer,css:[a.l0.position.absolute,{top:2,right:-2}]})]})},Ht=function(){var e=Ie("isTemplate"),t=(0,Fe.H)()("templateCheckbox");return(0,n.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,n.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,n.BX)(a.G7,{css:[a.l0.rowWithGap(8)],children:[(0,n.tZ)(a.XZ,{id:t,checked:e.value,onChange:function(t){return e.setValue(t.target.checked)}}),(0,n.tZ)("label",{htmlFor:t,children:"Publish repl as a template"})]}),(0,n.tZ)(Ue,{error:e.error})]}),(0,n.tZ)(a.xv,{variant:"small",color:"dimmer",multiline:!0,children:"This is a good option for Repls meant as starting points for future work."}),(0,n.tZ)(a.xv,{variant:"small",multiline:!0,css:a.l0.color.orangeStrongest,children:"Please include a README or other explanation of your template in order to be considered for a feature."})]})},zt=r(48418);function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kt(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function Yt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){Kt(i,n,o,l,a,"next",e)}function a(e){Kt(i,n,o,l,a,"throw",e)}l(void 0)}))}}function $t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){$t(e,t,r[t])}))}return e}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Qt=(0,a.KD)("form"),er=function(e){var t=e.user,r=je(),o=r.selectedRepl,i=r.replTitleField,l=r.replDescriptionField,c=r.replIconUrl,s=r.tagsField,d=r.isTemplateField;return(0,n.BX)(a.Tg,{background:"root",css:[$t({},(0,g.e)("tabletMin"),{display:"flex"}),a.l0.flex.growAndShrink(1),a.l0.p(16),a.l0.colWithGap(12),a.l0.align.center,a.l0.display.none],children:[(0,n.tZ)(a.xv,{variant:"small",color:"dimmer",css:[a.l0.width("100%"),{fontWeight:a.TV.fontWeightMedium}],children:"Preview"}),(0,n.BX)(a.G7,{css:[a.l0.width("100%"),a.l0.maxWidth(432),a.l0.position.relative],children:[(0,n.tZ)(a.G7,{css:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+a.TV.backgroundRoot+", inset 0 -48px 24px -24px "+a.TV.backgroundRoot}}),(0,n.BX)(a.G7,{css:[a.l0.height(416),a.l0.colWithGap(24),a.l0.justify.center,a.l0.overflow("hidden"),a.l0.backgroundColor.backgroundRoot],children:[(0,n.tZ)(F,{}),o&&c?(0,n.tZ)(V,{post:{user:t,repl:qt({},o,{title:i.value,iconUrl:c,tags:s.value,description:l.value,isTemplate:d.value})}}):(0,n.tZ)(a.G7,{css:[a.l0.flex.grow(1),a.l0.align.center,a.l0.justify.center],children:(0,n.tZ)(u.Z,{})}),(0,n.tZ)(F,{})]})]})]})};function tr(e){var t=e.replId,r=e.currentUser,i=e.source,l=(0,v.Z)("flag-new-pub-flow-allow-publish-templates"),c=["Basics","Tags","Icon","Cover page"];l&&c.push("More");var m=function(){var e=Yt(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=2;break}return e.abrupt("return",{message:"Could not get file"});case 2:if(t){e.next=4;break}return e.abrupt("return",{message:"File path cannot be blank"});case 4:return e.prev=4,e.next=7,D.stat(t);case 7:if((r=e.sent).exists&&r.type===Et.Tv.File){e.next=10;break}return e.abrupt("return",{message:"File does not exist"});case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",{message:"Could not get file"});case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),b=Ce({replId:t,fileValidator:m,source:i}),y=b.selectedRepl,w=b.isReplLoading,Z=b.replLoadingError,x=b.replIdField,S=b.replTitleField,k=b.replDescriptionField,O=b.iconUrlField,R=b.tagsField,C=b.coverDefaultViewField,P=b.coverUrlField,I=b.coverFileField,j=b.isTemplateField,T=b.save,B=b.isSaving,A=b.savingError,E=b.publish,V=b.isPublishing,G=b.publishingError,F=b.isPublished,U=Bt({repl:y,currentUser:r}),D=U.fs,X=U.dotReplit,W=U.didBsod,M=U.devClearBsod,L=Jt(o.useState(0),2),H=L[0],z=L[1],N=c[H],K=H===c.length-1,Y=Jt(o.useState({show:!1,isUpdate:!1}),2),$=Y[0],q=Y[1],J=Jt(o.useState((function(){return Array(c.length).fill(!1)})),2),Q=J[0],ee=J[1],te=o.useCallback((function(e,t){var r=Q;r[e]=t,ee(r)}),[Q]);o.useEffect((function(){b.replTitleField.value&&b.replDescriptionField.value?te(0,!0):te(0,!1),b.tagsField.value.length>0?te(1,!0):te(1,!1),b.iconUrlField.value?te(2,!0):te(2,!1),b.coverDefaultViewField.value===ye.ReplImage&&b.coverUrlField.value||b.coverDefaultViewField.value===ye.ReplFile&&b.coverFileField.value?te(3,!0):te(3,!1)}),[Q,b,te]);var re=Xt({dotReplit:X});o.useEffect((function(){re.isLoading||!re.entryPoint||I.value||I.setValue(re.entryPoint)}),[re.isLoading,re.entryPoint,I]);var ne=Jt(o.useState(!1),2),oe=ne[0],ie=ne[1];o.useEffect((function(){oe||t&&(w||F)||(ie(!0),(0,le.j)(le.U3.PUBLISH_SELECTED,{source:i}))}),[oe,i,t,w,F]);var ae=(0,_.Z)(Boolean((null===y||void 0===y?void 0:y.publishedAs)||(null===y||void 0===y?void 0:y.lastPublishedAt))),ue=(0,_.Z)(N);if(o.useEffect((function(){return function(){ae.current||(0,le.j)(le.U3.PUBLISH_FLOW_EXITED,{source:i,lastSectionVisited:ue.current})}}),[i,ae,ue]),W)return(0,n.tZ)(At.Z,{devHide:M});if($.show&&y)return(0,n.tZ)(zt.q,{repl:y,isUpdate:$.isUpdate});var ce,se={Basics:{hasError:Boolean(x.error||S.error||k.error),isValid:Yt(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([x.validate(),S.validate(),k.validate()]);case 2:return e.abrupt("return",e.sent.every((function(e){return!e})));case 3:case"end":return e.stop()}}),e)})))},Tags:{hasError:Boolean(R.error),isValid:Yt(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.validate();case 2:return e.abrupt("return",!e.sent);case 3:case"end":return e.stop()}}),e)})))},Icon:{hasError:Boolean(O.error),isValid:Yt(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.validate();case 2:return e.abrupt("return",!e.sent);case 3:case"end":return e.stop()}}),e)})))},"Cover page":{hasError:Boolean(C.value===ye.ReplImage?P.error:I.error),isValid:Yt(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.value!==ye.ReplImage){e.next=6;break}return e.next=3,P.validate();case 3:e.t0=!e.sent,e.next=9;break;case 6:return e.next=8,I.validate();case 8:e.t0=!e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})))},More:{hasError:Boolean(j.error),isValid:Yt(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.validate();case 2:return e.abrupt("return",!e.sent);case 3:case"end":return e.stop()}}),e)})))}},de=se[N].hasError,fe=se[N].isValid,pe=null!==(ce=c.find((function(e){return se[e].hasError})))&&void 0!==ce?ce:null,he=null;y?Z||A||G?he="Something went wrong - please try again":de&&(he="Please fill out the the form"):he="Please select a repl";var ve=Boolean(!y||de||Z||w||B||V),ge=function(){var e=Yt(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ve,e.t0){e.next=5;break}return e.next=4,fe();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,T();case 10:z(t),e.next=16;break;case 13:return e.prev=13,e.t1=e.catch(7),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,n.tZ)(Pe.Provider,{value:b,children:(0,n.BX)(a.Tg,{css:[a.l0.borderRadius(8),a.l0.flex.row,a.l0.overflow("hidden")],background:"default",children:[(0,n.BX)(a.G7,{css:[a.l0.colWithGap(12),a.l0.p(16),a.l0.minWidth(320),a.l0.flex.growAndShrink(1),$t({},(0,g.e)("tabletMin"),{maxWidth:320})],children:[(0,n.BX)(a.G7,{css:[a.l0.rowWithGap(4),a.l0.justify.spaceBetween],children:[(0,n.tZ)(a.xv,{variant:"subheadBig",children:F?"Edit Publish Settings":"Publish ".concat(t?"this":"a"," Repl")}),(0,n.tZ)("a",{href:"https://replit.com/@util/Publish-20-Feedback?v=1",target:"_blank",rel:"noopener noreferrer",css:{"&:hover span":{textDecoration:"underline"}},children:(0,n.tZ)(a.xv,{variant:"small",css:{fontWeight:a.TV.fontWeightMedium},children:"Share feedback"})})]}),(0,n.BX)(Qt,{onSubmit:function(){var e=Yt(s().mark((function e(t){var r,n,o,i,l,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!K){e.next=39;break}r=!0,n=!1,o=void 0,e.prev=3,i=c[Symbol.iterator]();case 5:if(r=(l=i.next()).done){e.next=14;break}return a=l.value,e.next=9,se[a].isValid();case 9:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:r=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),n=!0,o=e.t0;case 20:e.prev=20,e.prev=21,r||null==i.return||i.return();case 23:if(e.prev=23,!n){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:if(F){e.next=34;break}return e.next=31,E();case 31:q({show:!0,isUpdate:!1}),e.next=37;break;case 34:return e.next=36,T();case 36:q({show:!0,isUpdate:!0});case 37:e.next=40;break;case 39:ge(H+1);case 40:case"end":return e.stop()}}),e,null,[[3,16,20,28],[21,,23,27]])})));return function(t){return e.apply(this,arguments)}}(),css:[a.l0.colWithGap(16),a.l0.flex.growAndShrink(1)],children:[(0,n.tZ)(a.G7,{css:[a.l0.rowWithGap(4),a.l0.align.center],children:c.map((function(e,t){return(0,n.BX)(o.Fragment,{children:[0!==t&&(0,n.tZ)(Mt,{}),(0,n.tZ)(Lt,{isActive:H===t,isComplete:Q[t],onClick:function(){return ge(t)},disabled:ve,children:e})]},e)}))}),(0,n.BX)(a.G7,{css:a.l0.flex.growAndShrink(1),children:["Basics"===N&&(0,n.tZ)(ze,{}),"Tags"===N&&(0,n.tZ)(Ee,{}),"Icon"===N&&(0,n.tZ)(xt,{}),"Cover page"===N&&(0,n.tZ)(wt,{fs:D}),"More"===N&&(0,n.tZ)(Ht,{})]}),(0,n.BX)(a.G7,{children:[K&&pe&&pe!==N&&(0,n.tZ)(a.E_,{colorway:"negative",icon:(0,n.tZ)(d.Z,{}),text:"Please fix error in ".concat(pe," section")}),A&&(0,n.tZ)(a.E_,{colorway:"negative",icon:(0,n.tZ)(d.Z,{}),text:A}),G&&(0,n.tZ)(a.E_,{colorway:"negative",icon:(0,n.tZ)(d.Z,{}),text:G})]}),(0,n.BX)(a.G7,{css:[a.l0.rowWithGap(8),a.l0.justify.spaceBetween,a.l0.align.center],children:[(0,n.tZ)(a.zx,{css:[0===H&&a.l0.visibility.hidden],type:"button",iconLeft:(0,n.tZ)(p.Z,{}),disabled:ve,onClick:function(){return ge(H-1)},text:"Back"}),B&&(0,n.tZ)(a.G7,{css:[a.l0.rowWithGap(4),a.l0.color.foregroundDimmer],children:(0,n.tZ)(u.Z,{})}),(0,n.BX)(a.u,{tooltip:he,placement:"bottom",isDisabled:!he,children:[!K&&(0,n.tZ)(a.zx,{type:"submit",colorway:"primary",iconLeft:(0,n.tZ)(h.Z,{}),disabled:ve,text:"Next"}),K&&!F&&(0,n.tZ)(a.zx,{type:"submit",colorway:"primary",css:[{boxShadow:"0px 0px 16px 0px ".concat(a.TV.accentPrimaryDimmer," !important")}],iconLeft:(0,n.tZ)(f.Z,{}),disabled:Boolean(ve||pe),text:V?"Publishing...":"Publish to Community"}),K&&F&&(0,n.tZ)(a.zx,{type:"submit",colorway:"primary",iconLeft:(0,n.tZ)(f.Z,{}),disabled:Boolean(ve||pe),text:B?"Saving...":"Save"})]})]})]})]}),(0,n.tZ)(er,{user:r})]})})}var rr=r(79523);function nr(e){var t,r,c=e.replId,s=e.source;o.useEffect(rr.S,[]);var d=(0,l.amk)(),f="CurrentUser"===(null===(t=d.data)||void 0===t||null===(r=t.currentUser)||void 0===r?void 0:r.__typename)?d.data.currentUser:null;return d.loading?(0,n.tZ)(i.Z,{css:[a.l0.center,a.l0.p(32)],children:(0,n.tZ)(u.Z,{})}):d.error||!f?(0,n.tZ)(i.Z,{css:[a.l0.center,a.l0.p(32)],children:(0,n.tZ)(a.xv,{children:"Something went wrong, please try again."})}):(0,n.tZ)(tr,{source:s,replId:c,currentUser:f})}},48418:function(e,t,r){r.d(t,{q:function(){return Z}});var n=r(35944),o=r(67294),i=r(95694),l=r(88768),a=r(41664),u=r.n(a),c=r(74302),s=r(98647),d=r(71841),f=r(77982),p=r(92432),h=r(11163),v="https://twitter.com/intent/tweet";function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){m(e,t,r[t])}))}return e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=function(e){var t=e.url,r=e.successMessageDurationMs,l=void 0===r?1500:r,a=y(o.useState(!1),2),u=a[0],c=a[1],f=o.useRef(null);return o.useEffect((function(){return function(){f.current&&clearTimeout(f.current)}}),[]),(0,n.tZ)(i.u,{isOpen:u,placement:"bottom",tooltip:u?"Copied!":"Copy link",delay:0,children:(0,n.tZ)(i.hU,{alt:"Copy link",tooltipHidden:!1,onClick:function(){t&&((0,s.Z)(t),c(!0),f.current=setTimeout((function(){c(!1)}),l))},children:(0,n.tZ)(d.Z,{})})})},Z=function(e){var t=e.repl,r=e.isUpdate,o=(0,h.useRouter)(),a=(0,c.j3)(t),s=t.url?(0,c.QB)(t):"",d=t.publishedAs===l.O2h.Template,g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,r=e.url,n=e.hashtags,o=e.via,i=new URLSearchParams;t&&i.append("text",t),r&&i.append("url",r),n&&i.append("hashtags",n.join(",")),o&&i.append("via",o);var l=i.toString();return l.length>0?"".concat(v,"?").concat(l):v}({text:d?"I just created a new Template on Replit: ".concat(t.title):"I just created a new Repl on Replit: ".concat(t.title),url:s});return(0,n.BX)(i.Tg,{background:"default",css:[i.l0.borderRadius(8),i.l0.p(16),i.l0.overflow("hidden"),i.l0.colWithGap(16)],children:[(0,n.BX)(i.G7,{css:[i.l0.colWithGap(16)],children:[(0,n.BX)(i.xv,{variant:"subheadBig",children:[d?"Template":"Repl"," ",r?"updated":"published","!"]})," ",(0,n.BX)(i.G7,{css:[i.l0.colWithGap(4)],children:[(0,n.tZ)(i.xv,{variant:"small",css:[i.l0.color.foregroundDimmer],children:"Cover page link"}),(0,n.BX)(i.G7,{css:[i.l0.rowWithGap(4),i.l0.align.center],children:[(0,n.tZ)(u(),b({},a,{css:[i.l0.flex.growAndShrink(1)],children:(0,n.tZ)("a",{css:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:s})})),(0,n.tZ)(w,{url:s})]})]})]}),(0,n.BX)(i.G7,{css:[i.l0.rowWithGap(16),i.l0.justify.spaceBetween,{alignItems:"flex-end"}],children:[(0,n.BX)(i.G7,{css:[i.l0.colWithGap(8)],children:[(0,n.tZ)(i.xv,{variant:"small",css:[i.l0.color.foregroundDimmer],children:"Share to"}),(0,n.BX)("a",{href:g,target:"_blank",rel:"noopener noreferrer",css:[i.l0.display.flex,i.l0.colWithGap(2),i.l0.color.foregroundDefault,i.l0.align.center],children:[(0,n.tZ)(f.Z,{filled:!0}),(0,n.tZ)(i.xv,{children:"Twitter"})]})]}),(0,n.tZ)(i.G7,{children:(0,n.tZ)(i.zx,{type:"button",iconRight:(0,n.tZ)(p.Z,{}),text:d?"Go to Templates":"Go to Community",onClick:function(){d?o.push("/templates"):o.push({pathname:"/postsFeed",query:{order:"new"}},{pathname:"/community/all",query:{order:"new"}})}})})]})]})}},78143:function(e,t,r){r.d(t,{r:function(){return f}});var n=r(34051),o=r.n(n),i=r(88768);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t,r,n,o,i,l){try{var a=e[i](l),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){a(i,n,o,l,u,"next",e)}function u(e){a(i,n,o,l,u,"throw",e)}l(void 0)}))}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s="Something went wrong publishing your Template";function d(e){if(e.error)return e.error.message||s;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return s}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return s}}}function f(){var e=c((0,i.MM_)(),2),t=e[0],r=e[1],n=c((0,i.pec)(),2),l=n[0],a=n[1],f=function(){var e=u(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.input,!r.loading&&!a.loading){e.next=3;break}return e.abrupt("return",{data:null,error:null});case 3:return e.prev=3,e.next=6,l({variables:{input:n}});case 6:return i=e.sent,e.abrupt("return",{data:i.data,error:d(i)});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",{data:null,error:s});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=u(o().mark((function e(n){var i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.input,!r.loading&&!a.loading){e.next=3;break}return e.abrupt("return",{data:null,error:null});case 3:return e.prev=3,e.next=6,t({variables:{input:i}});case 6:return l=e.sent,e.abrupt("return",{data:l.data,error:d(l)});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",{data:null,error:s});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return{createRelease:f,createDeployment:p,data:r.data||a.data,loading:r.loading||a.loading,error:d(r||a)}}},13604:function(e,t,r){r.d(t,{T:function(){return s}});var n=r(35944),o=r(67294),i=r(54929),l=r(3204),a=r(92704),u=r(20255),c=r(72829);function s(e){var t=e.onFile,r=e.text,s=(0,o.useRef)(null);return(0,n.BX)(i.Z,{css:[l.l0.position.relative],children:[(0,n.tZ)("input",{css:[[l.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:s,accept:c.W9.join(","),type:"file",onChange:function(e){var r=e.target,n=r.validity,o=r.files;if(n.valid){var i=o?o[0]:null;i&&t(i)}}}),(0,n.tZ)(a.zx,{outlined:!0,stretch:!0,text:r,iconLeft:(0,n.tZ)(u.Z,{}),onClick:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.click()},type:"button"})]})}},98741:function(e,t,r){r.d(t,{BP:function(){return C},_J:function(){return R},cX:function(){return O}});var n=r(35944),o=r(67294),i=r(88768),l=r(67938),a=r(89957),u=r(90652),c=r(9917),s=r(40746),d=r(53009),f=r(1517),p=r(54929),h=r(3204),v=r(88503),g=r(79162),m=r(45718),b=r(19815);function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){y(e,t,r[t])}))}return e}var Z=(0,p.K)("div"),x=(0,p.K)("li"),S={searchValue:"",loading:!1,repls:[]};function k(e,t){switch(t.type){case"data":var r,n=(null===(r=t.data.currentUser)||void 0===r?void 0:r.publishableReplSearch)||[];return w({},e,{loading:!1,repls:(0,s.Z)(n,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return w({},e,{loading:!0});case"searchValue":return w({},e,{searchValue:t.searchValue})}}function O(){var e=(0,o.useReducer)(k,S),t=e[0],r=e[1],n=(0,u.Z)(t.searchValue,200),l=(0,i.b1W)({variables:{search:n},notifyOnNetworkStatusChange:!0,onCompleted:function(e){r({type:"data",data:e})}}).loading;(0,o.useEffect)((function(){l&&r({type:"loading"})}),[l]);var a=(0,o.useCallback)((function(e){return r({type:"searchValue",searchValue:e})}),[]);return{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:a}}function R(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function C(e){var t,r=o.useRef(null);(0,b.rf)((function(){var t;e.selectedRepl&&(null===(t=r.current)||void 0===t||t.blur())}),[e.selectedRepl]);var i=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&R(e.selectedRepl)===e.inputValue?(0,n.tZ)(p.Z,{css:[h.l0.px(8),h.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,n.tZ)(d.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,n.BX)(p.Z,{css:[{position:"relative"}],children:[(0,n.BX)(Z,w({},e.getComboboxProps(),{css:{position:"relative"},children:[i,(0,n.tZ)(a.ZP,w({css:[h.l0.pr(32),i&&h.l0.pl(32)]},e.getInputProps({placeholder:"Search for a repl",onFocus:e.onFocus,ref:r}))),(0,n.tZ)(p.Z,{css:[h.l0.center,h.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,n.tZ)(f.Z,{}):(0,n.tZ)(v.Z,{})})]})),(0,n.tZ)(Z,w({},e.getMenuProps(),{css:{position:"relative"},children:e.isOpen?(0,n.BX)(g.Z,{children:[e.loading&&0===e.repls.length?(0,n.tZ)(x,{css:[h.l0.center,h.l0.py(32)],children:(0,n.tZ)(f.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,n.tZ)(x,{css:[h.l0.center,h.l0.py(32)],children:(0,n.tZ)(l.x,{color:"dimmer",variant:"small",children:"No repls found"})}),e.repls.map((function(t,r){return(0,n.tZ)(x,w({},e.getItemProps({item:t,index:r}),{children:(0,n.tZ)(m.Z,{filter:"",title:R(t),subtitle:(0,c.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===r,icon:t.iconUrl?(0,n.tZ)(d.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)}))]}):null}))]})}},69056:function(e,t,r){r.d(t,{Z:function(){return _}});var n=r(35944),o=r(67294),i=r(54929),l=r(3204),a=r(27802),u=r(70917),c=r(66552),s=r(94590),d=r(67938),f=r(88942),p=r(88768),h=r(65577),v=r(85060),g=r(90652),m=r(40746);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=/^[0-9a-zA-Z]+$/,Z=function(e){return e.id};function x(e){var t=e.onSelect,r=e.filter,n=void 0===r?function(){return!0}:r,i=(0,o.useState)(""),l=i[0],a=i[1],u=(0,g.Z)(l,100),c=(0,h.Z)(t),s=function(e){var t=e.search,r=e.filter,n=(0,p.zdu)({variables:{limit:t?10:3,search:t}}).data,i=(0,o.useState)({official:[],community:[]}),l=i[0],a=i[1],u=(0,o.useMemo)((function(){if(n){var e=[],o=[],i=new Set,l=!0,a=!1,u=void 0;try{for(var c,s=n.tagGroups.official[Symbol.iterator]();!(l=(c=s.next()).done);l=!0){var d=c.value;i.add(d.id.toLowerCase()),r(d)&&e.push(d)}}catch(y){a=!0,u=y}finally{try{l||null==s.return||s.return()}finally{if(a)throw u}}var f=!0,p=!1,h=void 0;try{for(var v,g=n.tagGroups.community[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value;i.add(m.id.toLowerCase()),r(m)&&o.push(m)}}catch(y){p=!0,h=y}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}var b=t&&0===o.length&&!i.has(t.toLowerCase())?{id:t,isOfficial:!1,replCount:0}:void 0;return{official:e,community:o,newTag:b&&r(b)?b:void 0}}}),[n,r,t]);return(0,o.useEffect)((function(){if(u){var e=u.official,t=u.community,r=u.newTag;a((function(n){return{official:(0,m.Z)(e,{existing:n.official,getKey:Z}),community:(0,m.Z)(t,{existing:n.community,getKey:Z}),newTag:r}}))}}),[u]),{tagGroups:l,reset:function(){a({official:[],community:[]})}}}({search:u,filter:n}),d=s.tagGroups,b=s.reset,x=(0,f.Kb)({inputValue:l,items:d.newTag?[d.newTag]:y(d.official).concat(y(d.community)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(b(),a(""),x.reset(),x.openMenu())}});return(0,v.Z)((function(){x.selectedItem&&c.current(x.selectedItem)}),[x.selectedItem]),{tagGroups:d,combobox:x,onChange:function(e){var t=e.currentTarget.value;t&&!w.test(t)||t.length>30||a(t)}}}var S=r(24388),k=r(24506),O=r(79162),R=r(37466);function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){C(e,t,r[t])}))}return e}var I=(0,i.K)("ul"),j=(0,i.K)("li");function T(e){var t=e.children;return(0,n.tZ)(i.Z,{css:[l.l0.px(8),l.l0.pt(8)],children:(0,n.tZ)(d.x,{css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function B(e){var t=e.highlighted,r=e.tag;return(0,n.BX)(i.Z,{css:[l.l0.rowWithGap(8),l.l0.p(8),t&&{backgroundColor:k.gU.listItem[":not([disabled])"][":active"].backgroundColor},{cursor:"pointer"}],children:[(0,n.BX)(i.Z,{css:[l.l0.flex.growAndShrink(1),l.l0.rowWithGap(4)],children:[(0,n.tZ)(d.x,{children:r.id}),r.isOfficial?(0,n.tZ)(R.Z,{}):null]}),r.replCount>0?(0,n.tZ)(d.x,{variant:"small",color:"dimmest",children:(0,S.d)(r.replCount)}):null]})}var A=o.memo((function(e){var t=e.getItemProps,r=e.highlightedIndex,o=e.data;return"newTag"===o.type?(0,n.tZ)(O.Z,{css:[l.l0.minWidth(200)],children:(0,n.BX)(j,{children:[(0,n.tZ)(T,{children:"Community Tags"}),(0,n.tZ)(d.x,{css:[l.l0.p(8),l.l0.pt(16)],color:"dimmest",children:"No tags found"}),(0,n.tZ)(I,{children:(0,n.tZ)(j,P({},t({item:o.newTag,index:0}),{css:[l.l0.p(8)],children:(0,n.BX)(c.Z,{elevated:!0,css:[l.l0.borderRadius(8),l.l0.p(8),{cursor:"pointer"}],children:['Create "',o.newTag.id,'" tag']})}))})]})}):(0,n.tZ)(O.Z,{css:[l.l0.minWidth(200)],children:o.sections.reduce((function(e,o){return e.sections.push((0,n.BX)(j,{children:[(0,n.tZ)(T,{children:o.title}),(0,n.tZ)(I,{css:[l.l0.pt(4),l.l0.pb(8)],children:o.tags.map((function(o){var i=e.itemIndex++;return(0,n.tZ)(j,P({},t({item:o,index:i}),{children:(0,n.tZ)(B,{tag:o,highlighted:r===i})}),o.id)}))})]},o.title)),e}),{sections:[],itemIndex:0}).sections})}));function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){E(e,t,r[t])}))}return e}var G=(0,i.K)("div"),F=(0,i.K)("input"),U=(0,u.iv)([l.l0.fontSize(12),l.l0.pl(24),l.l0.pr(8),l.l0.py(4)]);function D(){return(0,n.tZ)(d.x,{css:[l.l0.px(4),l.l0.flex.row,l.l0.align.center,l.l0.position.absolute,l.l0.height("100%"),l.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,n.tZ)(s.Z,{size:12})})}function X(e){var t=e.text,r=e.children;return(0,n.BX)(c.Z,{elevated:!0,css:[l.l0.position.relative,l.l0.minWidth(30),l.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:l.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,n.tZ)(D,{}),(0,n.tZ)(d.x,{css:[{visibility:"hidden"},U],children:t}),r]})}function W(e){var t=e.onSelect,r=x({filter:e.filter,onSelect:t}),a=r.combobox,u=r.tagGroups,c=r.onChange,s=(0,o.useMemo)((function(){return function(e){if(e.newTag)return{type:"newTag",newTag:e.newTag};var t=[];return e.official.length&&t.push({title:"Official Tags",tags:e.official}),e.community.length&&t.push({title:"Community Tags",tags:e.community}),0===t.length?null:{type:"sections",sections:t}}(u)}),[u]),d="Add tag";return(0,n.BX)(i.Z,{children:[(0,n.tZ)(G,V({},a.getComboboxProps(),{css:[l.l0.flex.row],children:(0,n.tZ)(X,{text:a.inputValue||d,children:(0,n.tZ)(F,V({css:[l.l0.coverContainer,U,l.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":l.l0.color.foregroundDefault,"&:focus::placeholder":l.l0.color.foregroundDimmest}]},a.getInputProps({placeholder:d,onChange:c,onFocus:function(){a.openMenu()}})))})})),(0,n.tZ)(G,V({},a.getMenuProps(),{css:[l.l0.position.relative],children:s&&a.isOpen?(0,n.tZ)(A,{getItemProps:a.getItemProps,highlightedIndex:a.highlightedIndex,data:s}):null}))]})}function _(e){var t=e.tags,r=e.max,o=void 0===r?5:r,u=e.onAdd,c=e.onRemove,s=t.map((function(e){return e.id}));return(0,n.BX)(i.Z,{css:[l.l0.flex.row,l.l0.flex.wrap,{margin:"calc(-1 * ".concat(l.TV.space4,")")}],children:[t.map((function(e,t){return(0,n.tZ)(i.Z,{css:[l.l0.m(4)],children:(0,n.tZ)(a.g,{small:!0,tag:e,onClick:function(){return c(t)}})},e.id)})),t.length<o?(0,n.tZ)(i.Z,{css:[l.l0.m(4)],children:(0,n.tZ)(W,{onSelect:u,filter:function(e){return!s.includes(e.id.toLowerCase())}})}):null]})}},78845:function(e,t,r){function n(e){if(0===e.length)return"Adding tags helps others find your repl.";var t="Your Repl will be shared to";if(1===e.length)return"".concat(t," #").concat(e[0].id,".");if(2===e.length)return"".concat(t," #").concat(e[0].id," and #").concat(e[1].id,".");var r=e[e.length-1];return"".concat(t," ").concat(e.slice(0,-1).map((function(e){return"#".concat(e.id)})).join(", "),", and #").concat(r.id,".")}r.d(t,{Z:function(){return n}})},79236:function(e,t,r){r.d(t,{Z:function(){return v},c:function(){return p}});var n=r(67294),o=r(11163),i=r(56834),l=r(88768),a=r(33108),u=r(65577);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(u){a=!0,o=u}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return e?e.length>100?{message:"Title should not be more than ".concat(100," characters")}:void 0:{message:"Give your post a title"}}function f(e){return e?e.length>5e3?{message:"Post should not be more than ".concat(5e3," characters")}:void 0:{message:"Write something about this post"}}function p(e){var t,r=function(){if(!s.isValid)return null;if(x&&(!p.isValid||!h.isValid))return null;var e=s.value;if(null===e)throw new Error("Expected replId");var t=x?p.value:void 0,r=x?h.value:void 0;return{replId:e,iconUrl:v.value||void 0,title:t,body:r,tags:g.value.map((function(e){return e.id}))}},o=(0,n.useState)(!1),i=o[0],c=o[1],s=(0,a.Y)(e.replId||null,(function(e){return e?null:{message:"Select a Repl to share"}})),p=(0,a.Y)("",d),h=(0,a.Y)("",f),v=(0,a.Y)(null,(function(){return null})),g=(0,a.Y)([],(function(){return null})),m=(0,l.Nfb)({variables:{id:s.value||""},skip:!s.value}),b="Repl"===(null===(t=m.data)||void 0===t?void 0:t.repl.__typename)?m.data.repl:null,y=(0,u.Z)(g.setValue),w=(0,u.Z)(v.setValue);(0,n.useEffect)((function(){b&&(y.current(b.tags),w.current(b.iconUrl.endsWith(".svg")?null:b.iconUrl))}),[b,y,w]);var Z=(0,u.Z)([s.validate,p.validate,h.validate]);(0,n.useEffect)((function(){Z.current.map((function(e){return e()}))}),[Z]);var x=Boolean(i&&(p.value||h.value));return{replIdField:s,titleField:p,bodyField:h,replIconUrlField:v,tagsField:g,addPostIsExpanded:i,setAddPostIsExpanded:c,getInput:r,input:r(),inputError:function(){var e,t;return s.error?s.error.message:x?(null===(e=p.error)||void 0===e?void 0:e.message)||(null===(t=h.error)||void 0===t?void 0:t.message):void 0}(),selectedRepl:b}}function h(e){var t;if(null===e||void 0===e?void 0:e.error)return"Something went wrong";if(!(null===e||void 0===e?void 0:e.data))return null;var r=null===(t=e.data)||void 0===t?void 0:t.createReplPost2;return"UserError"===r.__typename||"NotFoundError"===r.__typename?r.message:null}function v(e){var t=e.source,r=(0,o.useRouter)(),n=s((0,l.HKC)({onCompleted:function(e){var n,o,l,a="Post"===e.createReplPost2.__typename?e.createReplPost2:null;a&&((0,i.j)(i.U3.POST_MADE,{source:t,isPublish:!1,title:a.title,description:null===(n=a.replComment)||void 0===n?void 0:n.body,isRemixed:Boolean(null===(o=a.repl)||void 0===o||null===(l=o.origin)||void 0===l?void 0:l.id),coverImage:!1}),r.push({pathname:"/postsFeed",query:{order:"new"}},{pathname:"/community/all",query:{order:"new"}}))}}),2),a=n[0],u=n[1];return{createReplPost:function(e){u.loading||a({variables:{input:e}})},error:h(u),loading:u.loading}}},45734:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(35944),o=(r(67294),r(47240));function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return(0,n.tZ)(o.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},e,{children:(0,n.tZ)("path",{d:"M19 12L5 12M5 12L12 5M5 12L12 19",strokeLinecap:"round",strokeLinejoin:"round"})}))}},92432:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(35944),o=(r(67294),r(47240));function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return(0,n.tZ)(o.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},e,{children:(0,n.tZ)("path",{d:"M5 12L19 12M19 12L12 5M19 12L12 19",strokeLinecap:"round",strokeLinejoin:"round"})}))}},1769:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(35944),o=(r(67294),r(47240));function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return(0,n.tZ)(o.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},e,{children:(0,n.tZ)("path",{d:"M21 9V5C21 4.46957 20.7893 3.96086 20.4142 3.58579C20.0391 3.21071 19.5304 3 19 3H5C4.46957 3 3.96086 3.21071 3.58579 3.58579C3.21071 3.96086 3 4.46957 3 5V9M17 14L12 9M12 9L7 14M12 9V21",strokeLinecap:"round",strokeLinejoin:"round"})}))}},77982:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(35944),o=(r(67294),r(47240));function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return(0,n.tZ)(o.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},e,{children:(0,n.tZ)("path",{d:"M7.55016 21.75C16.6045 21.75 21.5583 14.2467 21.5583 7.74186C21.5583 7.53092 21.5536 7.3153 21.5442 7.10436C22.5079 6.40746 23.3395 5.54425 24 4.5553C23.1025 4.9546 22.1496 5.21538 21.1739 5.32874C22.2013 4.71291 22.9705 3.74547 23.3391 2.60577C22.3726 3.17856 21.3156 3.58261 20.2134 3.80061C19.4708 3.01156 18.489 2.48912 17.4197 2.31405C16.3504 2.13899 15.2532 2.32105 14.2977 2.8321C13.3423 3.34314 12.5818 4.15471 12.1338 5.14131C11.6859 6.12792 11.5754 7.23462 11.8195 8.2903C9.86249 8.19209 7.94794 7.6837 6.19998 6.7981C4.45203 5.91249 2.90969 4.66944 1.67297 3.14952C1.0444 4.23324 0.852057 5.51565 1.13503 6.73609C1.418 7.95654 2.15506 9.02345 3.19641 9.71999C2.41463 9.69517 1.64998 9.48468 0.965625 9.10592V9.16686C0.964925 10.3041 1.3581 11.4066 2.07831 12.2868C2.79852 13.167 3.80132 13.7706 4.91625 13.995C4.19206 14.1931 3.43198 14.222 2.69484 14.0794C3.00945 15.0574 3.62157 15.9129 4.44577 16.5263C5.26997 17.1398 6.26512 17.4806 7.29234 17.5012C5.54842 18.8711 3.39417 19.6141 1.17656 19.6106C0.783287 19.61 0.390399 19.5859 0 19.5384C2.25286 20.9837 4.87353 21.7514 7.55016 21.75Z"})}))}},4993:function(e,t,r){r.d(t,{E:function(){return o},e:function(){return i}});var n=r(44054),o=function(e){return"@media screen and (max-width: ".concat(n.j[e],"px)")},i=function(e){return"@media screen and (min-width: ".concat(n.j[e],"px)")}}}]);
//# sourceMappingURL=3875-ace683661760f8b9.js.map